"use strict";(self.webpackChunksceiba_ui=self.webpackChunksceiba_ui||[]).push([[992],{992:(k,f,o)=>{o.r(f),o.d(f,{RevistasMesAppModule:()=>W,createTranslateLoader:()=>S});var x=o(9862),P=o(1447),T=o(6223),v=o(9515),Z=o(5061),w=o(4611),I=o(6208),s=o(3887),L=o(2496),U=o(797),g=o(6814),h=o(1884),Y=o(553),r=o(2787),E=o(3815),t=o(5879),N=o(6890),J=o(7700),m=o(5195),y=o(9038),u=o(3814),M=o(7509);function z(n,c){1&n&&(t.ynx(0),t.TgZ(1,"h1"),t._uU(2,"ERROR"),t.qZA(),t.BQk())}function F(n,c){if(1&n&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.stats.org.relationships.length," Instituciones ")}}const O=function(n){return[n,"directory"]},A=function(n){return{source_type:n}};function b(n,c){if(1&n&&(t.TgZ(0,"a",14),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("routerLink",t.VKq(3,O,i.env.revistasmes))("queryParams",t.VKq(5,A,e.source_type)),t.xp6(1),t.hij(" ",e.label," ")}}function D(n,c){if(1&n&&(t.TgZ(0,"a",14),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("routerLink",t.VKq(4,O,i.env.revistasmes))("queryParams",t.VKq(6,A,e.source_type)),t.xp6(1),t.AsE(" ",e.label," - ",e.source_count," ")}}function Q(n,c){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,b,2,7,"a",13),t.YNc(2,D,2,8,"a",13),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.Q6J("ngIf",!e.source_count||0==e.source_count),t.xp6(1),t.Q6J("ngIf",e.source_count>0)}}function H(n,c){if(1&n&&(t.TgZ(0,"a",15),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}const j=function(){return{"min-height":"160px"}};function V(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"div",2)(2,"mat-card",3),t._UZ(3,"img",4),t.TgZ(4,"mat-card-content",5)(5,"div",6)(6,"h2"),t._uU(7),t.qZA(),t.TgZ(8,"h2"),t._uU(9),t.qZA(),t.YNc(10,F,2,1,"h2",1),t.qZA()()()(),t.TgZ(11,"section",7)(12,"mat-card",8)(13,"mat-card-title-group")(14,"mat-card-title"),t._uU(15,"Tipo de Revistas"),t.qZA()(),t.TgZ(16,"mat-card-content")(17,"mat-nav-list",9),t.YNc(18,Q,3,2,"span",10),t.qZA()()(),t.TgZ(19,"mat-card",11)(20,"mat-card-title-group")(21,"mat-card-title"),t._uU(22,"\xdaltimos Ingresos"),t.qZA()(),t.TgZ(23,"mat-card-content")(24,"mat-nav-list",9),t.YNc(25,H,2,1,"a",12),t.qZA()()()(),t.BQk()),2&n){const e=t.oxw();t.xp6(7),t.hij("",e.stats.sources_count," Revistas"),t.xp6(2),t.hij("",e.records," Art\xedculos"),t.xp6(1),t.Q6J("ngIf",e.stats.org.relationships),t.xp6(8),t.Q6J("ngForOf",e.stats.source_types),t.xp6(1),t.Q6J("ngStyle",t.DdM(6,j)),t.xp6(6),t.Q6J("ngForOf",e.stats.last_sources)}}let _=(()=>{class n{constructor(e,i,a,p,d,l,q){this.environment=e,this.sourceService=i,this.oauthStorage=a,this.sourceServiceNoAuth=p,this.orgService=d,this._snackBar=l,this.dialog=q,this.topOrganizationPID="orgaid.223",this.topMainOrganization=null,this.stats=null,this.error=!1,this.env=this.environment}ngOnInit(){if(localStorage.getItem("topMainOrganization")&&""!=localStorage.getItem("topMainOrganization")){const e=JSON.parse(localStorage.getItem("topMainOrganization"));this.topMainOrganization=e,this.init()}else this.orgService.getOrganizationByPID(this.topOrganizationPID).subscribe(e=>{this.topMainOrganization=e,localStorage.setItem("topMainOrganization",JSON.stringify(e)),this.init()},e=>{console.log("error"),this.error=!0},()=>{});this.institutionsCount=0,this.records=0,this.sourcesCount=0,this.lastSources=new Array}init(){this.sourceServiceNoAuth.getSourcesStats(this.topMainOrganization.id).subscribe(e=>{if(e&&e.status==s.Mxn.SUCCESS){this.stats=e.data.aggr;let i=[];this.stats.source_types.forEach(a=>{a.source_type==s.rRR.JOURNAL.value&&(a.label=s.rRR.JOURNAL.label,i.push(a)),a.source_type==s.rRR.STUDENT.value&&(a.label=s.rRR.STUDENT.label,i.push(a)),a.source_type==s.rRR.POPULARIZATION.value&&(a.label=s.rRR.POPULARIZATION.label,i.push(a))}),this.stats.source_types=i,console.log(this.stats)}},e=>{console.log("error: "+e+"."),this.error=!0},()=>{console.log("complete")})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(s.qAh),t.Y36(s.tkg),t.Y36(h.Hy),t.Y36(s.isv),t.Y36(s.eY8),t.Y36(N.ux),t.Y36(J.uw))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["revistasmes-home"]],decls:3,vars:3,consts:[[3,"loading"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","center",1,"m-1"],["fxLayout","column wrap","fxLayoutAlign","center",2,"width","100%"],["width","100%","height","250","matCardImage","","src","assets/images/photo-of-people-having-meeting.jpg"],["fxLayout","column"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","center center","fxLayoutGap","6rem","fxLayoutGap.sm","3.5rem","fxLayoutGap.xs","0.5rem"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","center center","fxLayoutGap","2em",2,"padding","1em"],[1,"w-card"],["dense",""],[4,"ngFor","ngForOf"],[1,"w-card",3,"ngStyle"],["mat-list-item","",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink","queryParams",4,"ngIf"],["mat-list-item","",3,"routerLink","queryParams"],["mat-list-item",""]],template:function(i,a){1&i&&(t._UZ(0,"toco-progress",0),t.YNc(1,z,3,0,"ng-container",1),t.YNc(2,V,26,7,"ng-container",1)),2&i&&(t.Q6J("loading",!a.stats&&!a.error),t.xp6(1),t.Q6J("ngIf",a.error),t.xp6(1),t.Q6J("ngIf",a.stats))},dependencies:[g.sg,g.O5,g.PC,m.a8,m.dn,m.G2,m.n5,m.C1,y.Hk,y.Tg,r.rH,s.t15,u.xw,u.SQ,u.Wh,M.Zl],styles:[".w-card[_ngcontent-%COMP%], .w-60[_ngcontent-%COMP%]{min-width:15em!important;width:auto}.w-card[_ngcontent-%COMP%]{padding:1rem}.w-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding:0}.m-1[_ngcontent-%COMP%]{margin:1em}.w-60[_ngcontent-%COMP%]{width:60%}.mat-image-in-card[_ngcontent-%COMP%]{width:100%!important;min-width:15em;max-width:30em;height:auto;max-height:15em}.mat-card-with-img[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f}"]})}return n})();var C=o(2822),B=o(6658),G=o(8606);const $=function(){return{width:"95%"}};let R=(()=>{class n{constructor(e,i,a,p){this.environment=e,this.oauthStorage=i,this.router=a,this.headerService=p,this.loading=!1,this.env=this.environment,this.router.events.subscribe({next:l=>{l instanceof r.OD&&(this.loading=!0),(l instanceof r.m2||l instanceof r.gk||l instanceof r.Q3)&&(this.loading=!1)},error:()=>{},complete:()=>{}}),this._subMenus=[{nameTranslate:"REVISTAS_MES_DIRECTORY",useRouterLink:!0,href:this.environment.revistasmes+"/directory"},{nameTranslate:"REVISTAS_MES_INCLUDE_JOURNAL",useRouterLink:!0,href:this.environment.revistasmes+"/directory/new/journal",disabled:this.notAuthenticated},{nameTranslate:"REVISTAS_MES_MY_SOURCES",icon:"key",useRouterLink:!0,hideLabel:!0,href:`${this.environment.revistasmes}/permissions`,disabled:this.notAuthenticated}],this.headerService.setHeaderData({icon:"/assets/icons/apps/revistasmes.png",iconLabel:"REVISTAS_MES",iconAlt:"REVISTAS_MES",iconRoute:this.env.revistasmes,secondaryMenuElements:this._subMenus,extraMenuAuthenticatedUser:null})}ngOnInit(){}ngOnDestroy(){}get notAuthenticated(){return null==JSON.parse(this.oauthStorage.getItem(s.FGX))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(s.qAh),t.Y36(h.Hy),t.Y36(r.F0),t.Y36(G.r))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["seiba-ui-revistasmes-root"]],decls:4,vars:2,consts:[[1,"bg-primary-color",2,"height","100px","width","100%","height","200px","background","linear-gradient(to right, #007e3e, #373131)"],["fxLayout","row","fxLayoutAlign","center center",2,"border-radius","40px 40px 0 0"],[2,"margin-top","-170px","width","95%","background-color","white","border-radius","0px 0px 0 0","box-shadow","0px 5px 15px rgb(0, 0, 0, 0.088)",3,"ngStyle.xs"]],template:function(i,a){1&i&&(t._UZ(0,"div",0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"router-outlet"),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("ngStyle.xs",t.DdM(1,$)))},dependencies:[r.lC,u.xw,u.Wh,M.Zl],styles:[".mat-toolbar-sticky[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:1000}.color-white[_ngcontent-%COMP%]{color:#fff!important;text-emphasis:white;text-decoration:none!important}.mat-toolbar-single-row[_ngcontent-%COMP%]{height:auto!important;min-height:64px}.w-90[_ngcontent-%COMP%]{width:90%}.apps[_ngcontent-%COMP%]{margin:.5em}.apps[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px}.MES[_ngcontent-%COMP%]{width:190px!important}.triangle[_ngcontent-%COMP%]{position:relative;width:0;height:0;border-top:0px solid transparent;border-left:80px solid #dd2c00;border-bottom:80px solid transparent;margin-left:-16px}.triangle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:23px;top:11px;color:#fff;transform:rotate(-45deg)}.center-elements[_ngcontent-%COMP%]{width:auto}@media screen and (max-width: 490px){.center-elements[_ngcontent-%COMP%]{width:100%}}"]})}return n})();const X=[{path:"",component:R,children:[{path:"directory",loadChildren:()=>Promise.resolve().then(o.bind(o,2496)).then(n=>n.CatalogModule),data:{topOrganizationPID:"orgaid.223"}},{path:"permissions",loadChildren:()=>Promise.resolve().then(o.bind(o,797)).then(n=>n.PermissionsModule),canActivate:[s.FY],data:{topOrganizationPID:"orgaid.223"}},{path:"userprofile",component:B.t,canActivate:[s.FY]},{path:"notifications",component:s.ZPP,canActivate:[s.FY]},{path:"",component:_},{path:"**",component:E.S}]}];let K=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({providers:[C.U,C.M],imports:[r.Bz.forChild(X),r.Bz]})}return n})();function S(n){return new Z.w(n,"./assets/i18n/",".json")}let W=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275mod=t.oAB({type:n,bootstrap:[R]});static#e=this.\u0275inj=t.cJS({providers:[s.oDG,s.tkg,s.isv,s.iw$,s.X4d,s.eY8,s.JFf,{provide:h.Hy,useFactory:s.$wE},{provide:s.qAh,useValue:Y.N}],imports:[g.ez,I.f,v.aw.forChild({loader:{provide:v.Zw,useFactory:S,deps:[x.eN]}}),T.UX,K,s.PQW,s.TY2,s.nzq,s.IR2,P.o9,w.JP.forRoot({loader:x.eN}),L.CatalogModule,U.PermissionsModule]})}return n})()}}]);