"use strict";(self.webpackChunksceiba_ui=self.webpackChunksceiba_ui||[]).push([[992],{992:(k,f,o)=>{o.r(f),o.d(f,{RevistasMesAppModule:()=>W,createTranslateLoader:()=>C});var v=o(9862),T=o(1447),P=o(6223),x=o(9515),Z=o(5061),I=o(4611),w=o(6208),s=o(3887),L=o(2496),U=o(797),u=o(6814),h=o(1884),Y=o(553),r=o(2787),E=o(3815),t=o(5879),N=o(6890),J=o(7700),g=o(5195),y=o(9038),l=o(3814),M=o(7509);function b(e,c){1&e&&(t.ynx(0),t.TgZ(1,"h1"),t._uU(2,"ERROR"),t.qZA(),t.BQk())}function F(e,c){if(1&e&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.stats.org.relationships.length," Instituciones ")}}const O=function(e){return[e,"directory"]},A=function(e){return{source_type:e}};function z(e,c){if(1&e&&(t.TgZ(0,"a",13),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,i=t.oxw(2);t.Q6J("routerLink",t.VKq(3,O,i.env.revistasmes))("queryParams",t.VKq(5,A,n.source_type)),t.xp6(1),t.hij(" ",n.label," ")}}function D(e,c){if(1&e&&(t.TgZ(0,"a",13),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,i=t.oxw(2);t.Q6J("routerLink",t.VKq(4,O,i.env.revistasmes))("queryParams",t.VKq(6,A,n.source_type)),t.xp6(1),t.AsE(" ",n.label," - ",n.source_count," ")}}function Q(e,c){if(1&e&&(t.TgZ(0,"p"),t.YNc(1,z,2,7,"a",12),t.YNc(2,D,2,8,"a",12),t.qZA()),2&e){const n=c.$implicit;t.xp6(1),t.Q6J("ngIf",!n.source_count||0==n.source_count),t.xp6(1),t.Q6J("ngIf",n.source_count>0)}}function H(e,c){if(1&e&&(t.TgZ(0,"a",14),t._uU(1),t.qZA()),2&e){const n=c.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}const j=function(){return{"min-height":"160px"}};function V(e,c){if(1&e&&(t.ynx(0),t.TgZ(1,"div",2)(2,"mat-card",3),t._UZ(3,"img",4),t.TgZ(4,"mat-card-content",5)(5,"h2"),t._uU(6),t.qZA(),t.TgZ(7,"h2"),t._uU(8),t.qZA(),t.YNc(9,F,2,1,"h2",1),t.qZA()()(),t.TgZ(10,"section",6)(11,"mat-card",7)(12,"mat-card-title-group")(13,"mat-card-title"),t._uU(14,"Tipo de Revistas"),t.qZA()(),t.TgZ(15,"mat-card-content")(16,"mat-nav-list",8),t.YNc(17,Q,3,2,"p",9),t.qZA()()(),t.TgZ(18,"mat-card",10)(19,"mat-card-title-group")(20,"mat-card-title"),t._uU(21,"\xdaltimos Ingresos"),t.qZA()(),t.TgZ(22,"mat-card-content")(23,"mat-nav-list",8),t.YNc(24,H,2,1,"a",11),t.qZA()()()(),t.BQk()),2&e){const n=t.oxw();t.xp6(6),t.hij("",n.stats.sources_count," Revistas"),t.xp6(2),t.hij("",n.records," Art\xedculos"),t.xp6(1),t.Q6J("ngIf",n.stats.org.relationships),t.xp6(8),t.Q6J("ngForOf",n.stats.source_types),t.xp6(1),t.Q6J("ngStyle",t.DdM(6,j)),t.xp6(6),t.Q6J("ngForOf",n.stats.last_sources)}}let B=(()=>{class e{constructor(n,i,a,p,d,m,q){this.environment=n,this.sourceService=i,this.oauthStorage=a,this.sourceServiceNoAuth=p,this.orgService=d,this._snackBar=m,this.dialog=q,this.topOrganizationPID="orgaid.223",this.topMainOrganization=null,this.stats=null,this.error=!1,this.env=this.environment}ngOnInit(){if(localStorage.getItem("topMainOrganization")&&""!=localStorage.getItem("topMainOrganization")){const n=JSON.parse(localStorage.getItem("topMainOrganization"));this.topMainOrganization=n,this.init()}else this.orgService.getOrganizationByPID(this.topOrganizationPID).subscribe(n=>{this.topMainOrganization=n,localStorage.setItem("topMainOrganization",JSON.stringify(n)),this.init()},n=>{console.log("error"),this.error=!0},()=>{});this.institutionsCount=0,this.records=0,this.sourcesCount=0,this.lastSources=new Array}init(){this.sourceServiceNoAuth.getSourcesStats(this.topMainOrganization.id).subscribe(n=>{if(n&&n.status==s.Mxn.SUCCESS){this.stats=n.data.aggr;let i=[];this.stats.source_types.forEach(a=>{a.source_type==s.rRR.JOURNAL.value&&(a.label=s.rRR.JOURNAL.label,i.push(a)),a.source_type==s.rRR.STUDENT.value&&(a.label=s.rRR.STUDENT.label,i.push(a)),a.source_type==s.rRR.POPULARIZATION.value&&(a.label=s.rRR.POPULARIZATION.label,i.push(a))}),this.stats.source_types=i,console.log(this.stats)}},n=>{console.log("error: "+n+"."),this.error=!0},()=>{console.log("complete")})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(s.qAh),t.Y36(s.tkg),t.Y36(h.Hy),t.Y36(s.isv),t.Y36(s.eY8),t.Y36(N.ux),t.Y36(J.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["revistasmes-home"]],decls:3,vars:3,consts:[[3,"loading"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","center",1,"m-1"],["fxLayout","row wrap","fxLayoutAlign","center",1,"w-60"],["fxFlex","2 1 calc(80% - 100px)","height","250","matCardImage","","src","assets/images/photo-of-people-having-meeting.jpg",2,"margin-bottom","-16px","object-fit","cover"],["fxLayout","column",2,"padding","2em"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","center center","fxLayoutGap","2em",2,"padding","1em"],[1,"w-card"],["dense",""],[4,"ngFor","ngForOf"],[1,"w-card",3,"ngStyle"],["mat-list-item","",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink","queryParams",4,"ngIf"],["mat-list-item","",3,"routerLink","queryParams"],["mat-list-item",""]],template:function(i,a){1&i&&(t._UZ(0,"toco-progress",0),t.YNc(1,b,3,0,"ng-container",1),t.YNc(2,V,25,7,"ng-container",1)),2&i&&(t.Q6J("loading",!a.stats&&!a.error),t.xp6(1),t.Q6J("ngIf",a.error),t.xp6(1),t.Q6J("ngIf",a.stats))},dependencies:[u.sg,u.O5,u.PC,g.a8,g.dn,g.G2,g.n5,g.C1,y.Hk,y.Tg,r.rH,s.t15,l.xw,l.SQ,l.Wh,l.yH,M.Zl],styles:[".w-card[_ngcontent-%COMP%], .w-60[_ngcontent-%COMP%]{min-width:15em!important;width:auto}.m-1[_ngcontent-%COMP%]{margin:1em}.w-60[_ngcontent-%COMP%]{width:60%}.mat-image-in-card[_ngcontent-%COMP%]{width:100%!important;min-width:15em;max-width:30em;height:auto;max-height:15em}.mat-card-with-img[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f}"]})}return e})();var R=o(2822),$=o(6658),_=o(8606);const X=function(){return{width:"95%"}};let S=(()=>{class e{constructor(n,i,a,p){this.environment=n,this.oauthStorage=i,this.router=a,this.headerService=p,this.loading=!1,this.env=this.environment,this.router.events.subscribe({next:m=>{m instanceof r.OD&&(this.loading=!0),(m instanceof r.m2||m instanceof r.gk||m instanceof r.Q3)&&(this.loading=!1)},error:()=>{},complete:()=>{}}),this._subMenus=[{nameTranslate:"REVISTAS_MES_DIRECTORY",useRouterLink:!0,href:this.environment.revistasmes+"/directory"},{nameTranslate:"REVISTAS_MES_INCLUDE_JOURNAL",useRouterLink:!0,href:this.environment.revistasmes+"/directory/new/journal",disabled:this.notAuthenticated},{nameTranslate:"REVISTAS_MES_MY_SOURCES",icon:"key",useRouterLink:!0,hideLabel:!0,href:`${this.environment.revistasmes}/permissions`,disabled:this.notAuthenticated}],this.headerService.setHeaderData({icon:"/assets/icons/apps/revistasmes.png",iconLabel:"REVISTAS_MES",iconAlt:"REVISTAS_MES",iconRoute:this.env.revistasmes,secondaryMenuElements:this._subMenus,extraMenuAuthenticatedUser:null})}ngOnInit(){}ngOnDestroy(){}get notAuthenticated(){return null==JSON.parse(this.oauthStorage.getItem(s.FGX))}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(s.qAh),t.Y36(h.Hy),t.Y36(r.F0),t.Y36(_.r))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["seiba-ui-revistasmes-root"]],decls:4,vars:2,consts:[[1,"bg-primary-color",2,"height","100px","width","100%","height","200px","background","linear-gradient(to right, #007e3e, #373131)"],["fxLayout","row","fxLayoutAlign","center center",2,"border-radius","40px 40px 0 0"],[2,"margin-top","-170px","width","95%","background-color","white","border-radius","0px 0px 0 0","box-shadow","0px 5px 15px rgb(0, 0, 0, 0.088)",3,"ngStyle.xs"]],template:function(i,a){1&i&&(t._UZ(0,"div",0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"router-outlet"),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("ngStyle.xs",t.DdM(1,X)))},dependencies:[r.lC,l.xw,l.Wh,M.Zl],styles:[".mat-toolbar-sticky[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:1000}.color-white[_ngcontent-%COMP%]{color:#fff!important;text-emphasis:white;text-decoration:none!important}.mat-toolbar-single-row[_ngcontent-%COMP%]{height:auto!important;min-height:64px}.w-90[_ngcontent-%COMP%]{width:90%}.apps[_ngcontent-%COMP%]{margin:.5em}.apps[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px}.MES[_ngcontent-%COMP%]{width:190px!important}.triangle[_ngcontent-%COMP%]{position:relative;width:0;height:0;border-top:0px solid transparent;border-left:80px solid #dd2c00;border-bottom:80px solid transparent;margin-left:-16px}.triangle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:23px;top:11px;color:#fff;transform:rotate(-45deg)}.center-elements[_ngcontent-%COMP%]{width:auto}@media screen and (max-width: 490px){.center-elements[_ngcontent-%COMP%]{width:100%}}"]})}return e})();const G=[{path:"",component:S,children:[{path:"directory",loadChildren:()=>Promise.resolve().then(o.bind(o,2496)).then(e=>e.CatalogModule),data:{topOrganizationPID:"orgaid.223"}},{path:"permissions",loadChildren:()=>Promise.resolve().then(o.bind(o,797)).then(e=>e.PermissionsModule),canActivate:[s.FY],data:{topOrganizationPID:"orgaid.223"}},{path:"userprofile",component:$.t,canActivate:[s.FY]},{path:"notifications",component:s.ZPP,canActivate:[s.FY]},{path:"",component:B},{path:"**",component:E.S}]}];let K=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({providers:[R.U,R.M],imports:[r.Bz.forChild(G),r.Bz]})}return e})();function C(e){return new Z.w(e,"./assets/i18n/",".json")}let W=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e,bootstrap:[S]});static#n=this.\u0275inj=t.cJS({providers:[s.oDG,s.tkg,s.isv,s.iw$,s.X4d,s.eY8,s.JFf,{provide:h.Hy,useFactory:s.$wE},{provide:s.qAh,useValue:Y.N}],imports:[u.ez,w.f,x.aw.forChild({loader:{provide:x.Zw,useFactory:C,deps:[v.eN]}}),P.UX,K,s.PQW,s.TY2,s.nzq,s.IR2,T.o9,I.JP.forRoot({loader:v.eN}),L.CatalogModule,U.PermissionsModule]})}return e})()}}]);