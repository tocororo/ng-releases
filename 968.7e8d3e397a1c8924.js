"use strict";(self.webpackChunksceiba_ui=self.webpackChunksceiba_ui||[]).push([[968],{4447:(Bt,w,r)=>{r.r(w),r.d(w,{SurveyModule:()=>Qt});var c=r(6814),S=r(9862),et=r(1447),d=r(6223),v=r(9515),i=r(3887),I=r(1088),D=r(4630),O=r(9014),Z=r(2296),L=r(9488),u=r(5195),R=r(5986),U=r(2557),_=r(3680),E=r(8034),G=r(7700),C=r(6385),p=r(3305),J=r(4170),b=r(3176),T=r(617),N=r(2032),Q=r(9038),B=r(7988),j=r(1476),M=r(6007),Y=r(5940),P=r(7466),V=r(8525),$=r(2651),q=r(2599),F=r(6890),k=r(3566),y=r(8257),K=r(5313),H=r(4104),W=r(1274),A=r(2596),X=r(8445),t=r(5879);let nt=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[I.xu,Z.ot,L.vV,B.Tx,W.g0,A.AV,T.Ps,u.QW,N.c,R.p9,J.lN,G.Is,b.N6,F.ZX,M.Cv,Y.Cq,$.SJ,H.Nh,U.Hi,K.p0,k.JX,j.TU,q.rP,V.LD,_.Ng,D.Bb,p.To,E.FA,_.XK,Q.ie,X.dp,O.g,y.T5,_.si,C.t,P.Fk,I.xu,Z.ot,L.vV,B.Tx,W.g0,A.AV,T.Ps,u.QW,N.c,R.p9,J.lN,G.Is,b.N6,F.ZX,Y.Cq,M.Cv,$.SJ,H.Nh,U.Hi,K.p0,k.JX,j.TU,q.rP,V.LD,_.Ng,D.Bb,p.To,E.FA,_.XK,Q.ie,X.dp,O.g,y.T5,_.si,C.t,P.Fk]})}return e})();var f=r(2787),x=function(e){return e.bool="bool",e.integer="integer",e.select="select",e}(x||{}),m=r(3814);function it(e,s){1&e&&t._UZ(0,"mat-divider",15),2&e&&t.Q6J("inset",!0)}function rt(e,s){1&e&&t._UZ(0,"mat-divider",16),2&e&&t.Q6J("inset",!0)}function st(e,s){if(1&e&&t._UZ(0,"input-bool",17),2&e){const n=t.oxw().$implicit;t.Q6J("content",n._inputContent)}}function lt(e,s){if(1&e&&t._UZ(0,"input-number",17),2&e){const n=t.oxw().$implicit;t.Q6J("content",n._inputContent)}}function ut(e,s){if(1&e&&t._UZ(0,"input-select",17),2&e){const n=t.oxw().$implicit;t.Q6J("content",n._inputContent)}}function ct(e,s){if(1&e&&(t.ynx(0),t.YNc(1,it,1,1,"mat-divider",7),t.YNc(2,rt,1,1,"mat-divider",8),t.TgZ(3,"div",9)(4,"p",10),t._uU(5),t.qZA(),t.TgZ(6,"div",11)(7,"mat-icon",12),t._uU(8,"find_in_page"),t.qZA(),t.ynx(9,13),t.YNc(10,st,1,1,"input-bool",14),t.YNc(11,lt,1,1,"input-number",14),t.YNc(12,ut,1,1,"input-select",14),t.BQk(),t.qZA()(),t.BQk()),2&e){const n=s.$implicit,o=s.first,a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",o),t.xp6(1),t.Q6J("ngIf",!o),t.xp6(3),t.Oqu(n.desc),t.xp6(2),t.Q6J("matTooltip",a.whereToLookForIt+n.hint)("matTooltipPosition","right"),t.xp6(2),t.Q6J("ngSwitch",n.type),t.xp6(1),t.Q6J("ngSwitchCase",a.categoryQuestionType.bool),t.xp6(1),t.Q6J("ngSwitchCase",a.categoryQuestionType.integer),t.xp6(1),t.Q6J("ngSwitchCase",a.categoryQuestionType.select)}}function pt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"mat-expansion-panel",4),t.NdJ("opened",function(){const l=t.CHM(n).index,g=t.oxw();return t.KtG(g.setStep(l))}),t.TgZ(1,"mat-expansion-panel-header")(2,"mat-panel-title",5),t._uU(3),t.qZA()(),t.YNc(4,ct,13,9,"ng-container",6),t.qZA()}if(2&e){const n=s.$implicit,o=s.index,a=t.oxw();t.Q6J("expanded",a.step===o),t.xp6(3),t.Oqu(n.title),t.xp6(1),t.Q6J("ngForOf",n.questionsOrRecoms)}}let mt=(()=>{class e{constructor(n){this._transServ=n,this.categoryQuestionType=x,this._doTranslation(),this.parentFormGroup=void 0,this.surveySection=void 0}ngOnInit(){this._transServ.onLangChange.subscribe(n=>{this._doTranslation()}),this._initFormData(),console.log("Data got for ViewerCardComponent: ",this.parentFormGroup)}_initFormData(){let n,o;for(let a of this.surveySection.categories)for(n of a.questionsOrRecoms){switch(n.type){case x.bool:n._inputContent={formControl:i.Zpt.getFormControlByDefault(),name:n.id,label:void 0,controlType:i.Zpt,value:n.answer,required:!1,width:"100%",appearance:i.WhY.outline,ariaLabel:n.desc};break;case x.integer:o={},null!=n.min&&(o.min=n.min),null!=n.max&&(o.max=n.max),n._inputContent={formControl:i.ltV.getFormControlByDefault(o),name:n.id,label:void 0,controlType:i.ltV,value:n.answer,required:!1,width:"100%",appearance:i.WhY.outline,ariaLabel:n.desc};break;case x.select:n._inputContent={formControl:i.pAh.getFormControlByDefault(),name:n.id,label:void 0,controlType:i.pAh,value:n.answer,required:!1,width:"100%",appearance:i.WhY.outline,ariaLabel:n.desc,selectOptions:n.selectOptions,multiple:!1,showTooltip:!0,selectTooltipPosition:"below",optionsTooltipPosition:"left"};break;default:throw new Error(`For the '${e.name}' control, the category question type value has an error because the programme does not know what to do with it!`)}this.parentFormGroup.addControl(n._inputContent.name,n._inputContent.formControl)}}_doTranslation(){this._transServ.get("DONDE_BUSCARLA").subscribe(n=>{this.whereToLookForIt=n})}setStep(n){this.step=n}nextStep(){this.step++}prevStep(){this.step--}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(v.sK))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-viewer-card"]],inputs:{parentFormGroup:"parentFormGroup",surveySection:"surveySection"},decls:7,vars:4,consts:[["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","center center","mat-card-image","",1,"mch-bg-primary-color"],[2,"margin","0.5em auto"],[3,"formGroup","multi"],[3,"expanded","opened",4,"ngFor","ngForOf"],[3,"expanded","opened"],[1,"color-primary"],[4,"ngFor","ngForOf"],[3,"inset",4,"ngIf"],["style","margin-top: 1em",3,"inset",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","space-between center"],[2,"width","100%","margin-right","0.5em"],[2,"width","100%","display","contents"],["color","primary",3,"matTooltip","matTooltipPosition"],[3,"ngSwitch"],[3,"content",4,"ngSwitchCase"],[3,"inset"],[2,"margin-top","1em",3,"inset"],[3,"content"]],template:function(o,a){1&o&&(t.TgZ(0,"mat-card")(1,"mat-card-header",0)(2,"mat-card-title",1),t._uU(3),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"mat-accordion",2),t.YNc(6,pt,5,3,"mat-expansion-panel",3),t.qZA()()()),2&o&&(t.xp6(3),t.Oqu(a.surveySection.title),t.xp6(2),t.Q6J("formGroup",a.parentFormGroup)("multi","true"),t.xp6(1),t.Q6J("ngForOf",a.surveySection.categories))},dependencies:[c.sg,c.O5,c.RF,c.n9,A.gM,T.Hw,u.a8,u.dn,u.dk,u.G2,u.n5,p.pp,p.ib,p.yz,p.yK,C.d,d.JL,d.sg,m.xw,m.Wh,i.Zpt,i.ltV,i.pAh],styles:["[_nghost-%COMP%]     .mat-expansion-indicator:after{color:#5f9bd2}"]})}return e})();function dt(e,s){1&e&&t._UZ(0,"div",4)}function ht(e,s){1&e&&t._UZ(0,"br")}function gt(e,s){if(1&e&&(t.ynx(0),t.YNc(1,dt,1,0,"div",2),t.YNc(2,ht,1,0,"br",0),t._UZ(3,"app-viewer-card",3),t.BQk()),2&e){const n=s.$implicit,o=s.index,a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",0!=o),t.xp6(1),t.Q6J("parentFormGroup",a.surveyFormGroup)("surveySection",n)}}function vt(e,s){if(1&e&&(t.ynx(0),t.YNc(1,gt,4,4,"ng-container",1),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n._survey)}}let z=(()=>{class e{constructor(){this._actionText=void 0,this._survey=void 0,this.surveyFormGroup=void 0}ngOnInit(){console.log("Data got for SurveyQuestionsComponent: ",this.surveyFormGroup)}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-survey-questions"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["style","margin-top: 0.6em;",4,"ngIf"],[3,"parentFormGroup","surveySection"],[2,"margin-top","0.6em"]],template:function(o,a){1&o&&t.YNc(0,vt,2,1,"ng-container",0),2&o&&t.Q6J("ngIf",a._survey)},dependencies:[c.sg,c.O5,mt]})}return e})();var _t=r(2096),ft=r(7398);let tt=(()=>{class e{constructor(n,o,a){this._env=n,this._router=o,this._http=a,this._prefix="evaluation",this._httpOptions={headers:new S.WM({"Content-Type":"application/json",Authorization:"Bearer "})},this.evaluation=[],this.evaluationProcessed={}}doEvaluation(n,o,a){return this.processSurvey({uuid:o,sections:n.survey}).pipe((0,ft.U)(l=>l.data.evaluation))}editEvaluation(n){return console.error("editEvaluation: There is not backend yet!",n),(0,_t.of)(n)}getOneEvaluationById(n){return this._http.get(`${this._env.sceibaApi}evaluation/${n}`)}addSurvey(n){return this._http.post(`${this._env.sceibaApi}evaluation/init`,n)}processSurvey(n){return this._http.post(`${this._env.sceibaApi}evaluation/process`,n)}saveEvaluation(n){return this._http.post(`${this._env.sceibaApi}evaluation/save/${n}`,{})}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(i.qAh),t.LFG(f.F0),t.LFG(S.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),yt=(()=>{class e{constructor(n,o){this._transServ=n,this._surveyService=o}resolve(n,o){let a=n.paramMap.get("uuid");return console.log("From SurveyResolverService called getEvaluationById \n","Evaluation id: ",a,"_transServ.currentLang: ",this._transServ.currentLang),this._surveyService.getOneEvaluationById(a)}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(v.sK),t.LFG(tt))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function xt(e,s){1&e&&t.GkF(0)}function Ct(e,s){if(1&e&&(t.TgZ(0,"p",14),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.value)}}function Tt(e,s){if(1&e&&(t.TgZ(0,"p",15),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.value)}}function At(e,s){if(1&e&&(t.ynx(0),t._UZ(1,"mat-divider",10),t.TgZ(2,"div",11),t.YNc(3,Ct,2,1,"p",12),t.YNc(4,Tt,2,1,"p",13),t.qZA(),t.BQk()),2&e){const n=s.last;t.xp6(1),t.Q6J("inset",!0),t.xp6(2),t.Q6J("ngIf",!n),t.xp6(1),t.Q6J("ngIf",n)}}function St(e,s){if(1&e&&t.YNc(0,At,5,3,"ng-container",4),2&e){const n=t.oxw().$implicit;t.Q6J("ngForOf",n.questionsOrRecoms)}}function Zt(e,s){1&e&&(t.TgZ(0,"p",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"NO_HAY_RECOMENDACIONES")))}function Ft(e,s){if(1&e&&(t.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title",5),t._uU(3),t.qZA(),t.TgZ(4,"mat-panel-description",6),t._uU(5),t.qZA()(),t.YNc(6,xt,1,0,"ng-container",7),t.YNc(7,St,1,1,"ng-template",null,8,t.W1O),t.YNc(9,Zt,3,3,"ng-template",null,9,t.W1O),t.qZA()),2&e){const n=s.$implicit,o=t.MAs(8),a=t.MAs(10);t.xp6(3),t.Oqu(n.title),t.xp6(2),t.Oqu(n.titleEvaluationValue),t.xp6(1),t.Q6J("ngIf",n.questionsOrRecoms&&n.questionsOrRecoms.length)("ngIfThen",o)("ngIfElse",a)}}let wt=(()=>{class e{constructor(){this.surveySection=void 0}ngOnInit(){this._initFormData(),console.log("Data got for StaticViewerCardComponent: ",this.surveySection)}_initFormData(){}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-static-viewer-card"]],inputs:{surveySection:"surveySection"},decls:9,vars:4,consts:[["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","center center","mat-card-image","",1,"mch-bg-primary-color"],[1,"color-result-name",2,"margin","0.2em auto"],[1,"color-result-value",2,"margin","0.2em auto"],[3,"multi"],[4,"ngFor","ngForOf"],[1,"color-primary","expansion-header-name"],[1,"expansion-header-value"],[4,"ngIf","ngIfThen","ngIfElse"],["thenTemplate_Recoms",""],["elseTemplate_WithoutRecoms",""],[3,"inset"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","space-between center"],["style","width: 100%; margin: 1em auto;",4,"ngIf"],["style","width: 100%; margin: 1em auto auto;",4,"ngIf"],[2,"width","100%","margin","1em auto"],[2,"width","100%","margin","1em auto auto"],[2,"width","100%","margin","auto","color","#b0b0b0"]],template:function(o,a){1&o&&(t.TgZ(0,"mat-card")(1,"mat-card-header",0)(2,"mat-card-title",1),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-title",2),t._uU(5),t.qZA()(),t.TgZ(6,"mat-card-content")(7,"mat-accordion",3),t.YNc(8,Ft,11,5,"mat-expansion-panel",4),t.qZA()()()),2&o&&(t.xp6(3),t.Oqu(a.surveySection.title),t.xp6(2),t.Oqu(a.surveySection.titleEvaluationValue),t.xp6(2),t.Q6J("multi","true"),t.xp6(1),t.Q6J("ngForOf",a.surveySection.categories))},dependencies:[c.sg,c.O5,u.a8,u.dn,u.dk,u.G2,u.n5,p.pp,p.ib,p.yz,p.yK,p.u4,C.d,m.xw,m.Wh,v.X$],styles:[".color-result-name[_ngcontent-%COMP%]{color:#fff}.color-result-value[_ngcontent-%COMP%]{color:#000000b3}.expansion-header-name[_ngcontent-%COMP%]{width:70%;align-items:center}.expansion-header-value[_ngcontent-%COMP%]{align-items:center;color:#000}[_nghost-%COMP%]     .mat-expansion-indicator:after{color:#5f9bd2}"]})}return e})();function It(e,s){if(1&e&&(t.ynx(0),t._UZ(1,"br")(2,"app-static-viewer-card",6),t.BQk()),2&e){const n=s.$implicit;t.xp6(2),t.Q6J("surveySection",n)}}function Dt(e,s){if(1&e&&(t.ynx(0),t._UZ(1,"div",1),t.TgZ(2,"mat-card")(3,"mat-card-header",2)(4,"mat-card-title",3),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-title",4),t._uU(7),t.qZA()()(),t.YNc(8,It,3,1,"ng-container",5),t.BQk()),2&e){const n=t.oxw();t.xp6(5),t.Oqu(n._resultAndRecoms.generalEvaluationName),t.xp6(2),t.Oqu(n._resultAndRecoms.generalEvaluationValue),t.xp6(1),t.Q6J("ngForOf",n._resultAndRecoms.sections)}}let Ot=(()=>{class e{constructor(){this._resultAndRecoms=void 0}ngOnInit(){console.log("Data got for SurveyResultAndRecomsComponent: ",this._resultAndRecoms)}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-survey-result-and-recoms"]],inputs:{_resultAndRecoms:"_resultAndRecoms"},decls:1,vars:1,consts:[[4,"ngIf"],[2,"margin-top","0.6em"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","center center","mat-card-image","",1,"mch-bg-primary-color"],[1,"result-first-level","color-result-name",2,"margin","0.2em auto"],[1,"result-first-level","color-result-value",2,"margin","0.2em auto"],[4,"ngFor","ngForOf"],[3,"surveySection"]],template:function(o,a){1&o&&t.YNc(0,Dt,9,3,"ng-container",0),2&o&&t.Q6J("ngIf",a._resultAndRecoms&&a._resultAndRecoms.sections)},dependencies:[c.sg,c.O5,u.a8,u.dk,u.G2,u.n5,m.xw,m.Wh,wt],styles:[".result-first-level[_ngcontent-%COMP%]{font-size:26px}.color-result-name[_ngcontent-%COMP%]{color:#fff}.color-result-value[_ngcontent-%COMP%]{color:#000000b3}"]})}return e})(),Lt=(()=>{class e{constructor(){this.journalData_ChildControlsPath={name:"name",url:"url",issn:"issn"},this._actionText=void 0,this._journalData=void 0,this.journalDataFormGroup=void 0,this.nameContent=void 0,this.urlContent=void 0,this.issnContent=void 0}ngOnInit(){this._initFormData(),console.log("Data got for SurveyJournalDataComponent: ",this.journalDataFormGroup)}_initFormData(){this.nameContent={formControl:i.msU.getFormControlByDefault({pattern:"^[a-zA-Z_\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda][a-zA-Z-_\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda 0-9]*$"}),name:this.journalData_ChildControlsPath.name,label:"NOMBRE",placeholder:"ESCR_NOMBRE_REVISTA",controlType:i.msU,value:this._journalData.name,required:!0,width:"100%",appearance:i.WhY.outline,ariaLabel:"NOMBRE"},this.urlContent={formControl:i.Hgr.getFormControlByDefault(),name:this.journalData_ChildControlsPath.url,label:"Url",placeholder:"URL_GENERICA",controlType:i.Hgr,value:this._journalData.url,required:!0,width:"100%",appearance:i.WhY.outline,ariaLabel:"Url"},this.issnContent={formControl:i.Idq.getFormControlByDefault(),name:this.journalData_ChildControlsPath.issn,label:"ISSN",controlType:i.Idq,value:this._journalData.issn,required:!0,width:"100%",appearance:i.WhY.outline,ariaLabel:"ISSN"},this.journalDataFormGroup.addControl(this.journalData_ChildControlsPath.name,this.nameContent.formControl),this.journalDataFormGroup.addControl(this.journalData_ChildControlsPath.url,this.urlContent.formControl),this.journalDataFormGroup.addControl(this.journalData_ChildControlsPath.issn,this.issnContent.formControl)}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-survey-journal-data"]],inputs:{_actionText:"_actionText",_journalData:"_journalData",journalDataFormGroup:"journalDataFormGroup"},decls:5,vars:5,consts:[["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","space-between center",2,"margin-top","0.4em",3,"formGroup"],[1,"margin-input-control",3,"content"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","space-between center",3,"formGroup"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"input-text",1),t.qZA(),t.TgZ(2,"div",2),t._UZ(3,"input-url",1)(4,"input-issn",1),t.qZA()),2&o&&(t.Q6J("formGroup",a.journalDataFormGroup),t.xp6(1),t.Q6J("content",a.nameContent),t.xp6(1),t.Q6J("formGroup",a.journalDataFormGroup),t.xp6(1),t.Q6J("content",a.urlContent),t.xp6(1),t.Q6J("content",a.issnContent))},dependencies:[d.JL,d.sg,m.xw,m.Wh,i.Idq,i.msU,i.Hgr],styles:[".margin-input-control[_ngcontent-%COMP%]{margin:auto .5em 2em}"]})}return e})();const Rt=["stepper"];function Ut(e,s){1&e&&(t._uU(0),t.ALo(1,"translate")),2&e&&t.Oqu(t.lcZ(1,1,"DATOS_REVISTA"))}function Et(e,s){1&e&&(t._uU(0),t.ALo(1,"translate")),2&e&&t.Oqu(t.lcZ(1,1,"ENCUESTA"))}function Gt(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"router-outlet",17),t.NdJ("activate",function(a){t.CHM(n);const l=t.oxw();return t.KtG(l.onChildLoaded(a))}),t.qZA(),t.TgZ(2,"div",14)(3,"button",15),t.NdJ("click",function(){t.CHM(n);const a=t.oxw(),l=t.MAs(19);return t.KtG(a.goToJournalData(l))}),t.ALo(4,"translate"),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"mat-icon"),t._uU(8,"navigate_before"),t.qZA()(),t.TgZ(9,"button",18),t.NdJ("click",function(){t.CHM(n);const a=t.oxw(),l=t.MAs(19);return t.KtG(a.goToResultAndRecoms(l))}),t.ALo(10,"translate"),t._uU(11),t.ALo(12,"translate"),t.TgZ(13,"mat-icon"),t._uU(14,"navigate_next"),t.qZA()()(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(3),t.Q6J("matTooltip",t.lcZ(4,5,"IR_A_DATOS_REVISTA")),t.xp6(2),t.hij(" ",t.lcZ(6,7,"ANTERIOR")," "),t.xp6(4),t.Q6J("matTooltip",t.lcZ(10,9,"IR_A_RESULTADO_Y_RECOMENDACIONES"))("disabled",n.evalSurveyFormGroup.invalid),t.xp6(2),t.hij(" ",t.lcZ(12,11,"SIGUIENTE")," ")}}function Jt(e,s){1&e&&(t._uU(0),t.ALo(1,"translate")),2&e&&t.Oqu(t.lcZ(1,1,"RESULTADO_Y_RECOMENDACIONES"))}const bt=[{path:"",component:(()=>{class e{constructor(n,o,a,l,g,h){this._activatedRoute=n,this._formBuilder=o,this._transServ=a,this._surveyService=l,this._snackBar=g,this.router=h,this.fullEvaluation=void 0,this._actionText=void 0,this.title="",this.hasTaskInProgress=!0,this.evaluationFormGroup=void 0,this.evalJournalDataFormGroup=void 0,this.evalSurveyFormGroup=void 0,this._evaluationData=void 0}ngOnInit(){switch(console.log("Loading Stepper !!!!!!!!!!!!!"),this._actionText=this._activatedRoute.snapshot.children[0].url[this._activatedRoute.snapshot.children[0].url.length-1].path,this._actionText){case i.dw5.edit:this.title="TITULO_VISTA_DETALLES";break;case i.dw5.add:this.title="TITULO_VISTA_ADICIONAR";break;default:throw new Error(`For the '${e.name}' control, the URL written has an error because the programme does not know what to do with it!`)}this._activatedRoute.data.subscribe({next:({evaluation:{data:n}})=>{this._evaluationData=n.evaluation.data,this._evaluationUUID=n.evaluation.uuid,this.fullEvaluation=n.evaluation,this._initFormData(),this.hasTaskInProgress=!1},error:n=>{this.hasTaskInProgress=!1,new i.pF$(this._snackBar).showMessage(i.GL1.OK,n.message)}}),this._transServ.onLangChange.subscribe(n=>{this._setNewLanguage()}),console.log("Data got for SurveyComponent: ",this._evaluationData,this.evaluationFormGroup)}_initFormData(){this.evaluationFormGroup=this._formBuilder.group({journalData:this.evalJournalDataFormGroup=this._formBuilder.group({}),survey:this.evalSurveyFormGroup=this._formBuilder.group({})})}_setNewLanguage(n){this._surveyService.getOneEvaluationById(this._evaluationUUID).subscribe({next:({data:o})=>{this._evaluationData=o.evaluation.data,this._evaluationUUID=o.evaluation.uuid},error:o=>{new i.pF$(this._snackBar).showMessage(i.GL1.OK,o.message)}})}onChildLoaded(n){null!=this._actionText&&(n._actionText=this._actionText,n._survey=this._evaluationData.sections,n.surveyFormGroup=this.evalSurveyFormGroup)}onSelectedStepHasChanged(n){1==n.selectedIndex&&(this.hasTaskInProgress=!0,this._surveyService.addSurvey({...this.evaluationFormGroup.value.journalData,uuid:this._evaluationUUID}).subscribe({next:({data:o})=>{this._evaluationData=o.evaluation.data,this.fullEvaluation=o.evaluation,this.hasTaskInProgress=!1},error:o=>{new i.pF$(this._snackBar).showMessage(i.GL1.OK,o.message),this.hasTaskInProgress=!1}})),2==n.selectedIndex&&(this._actionText==i.dw5.add||this._actionText==`${i.dw5.add}/77h`)&&(this.hasTaskInProgress=!0,this._surveyService.doEvaluation(this.evaluationFormGroup.value,this._evaluationUUID,this._transServ.currentLang).subscribe({next:o=>{this._evaluationData.resultAndRecoms=o.data.resultAndRecoms,this.hasTaskInProgress=!1},error:o=>{this.hasTaskInProgress=!1,new i.pF$(this._snackBar).showMessage(i.GL1.OK,o.message)}}))}goToSurvey(n){n.next()}goToSurveyBack(n){n.previous()}goToJournalData(n){this._evaluationData.sections=void 0,n.previous()}goToResultAndRecoms(n){n.next()}save(){this.hasTaskInProgress=!0,console.log("Save Evaluation: ",this.evaluationFormGroup.valid,this.evaluationFormGroup),this._surveyService.saveEvaluation(this._evaluationUUID).subscribe({next:n=>{console.log("Save Evaluation result: ",n)},error:n=>{this.hasTaskInProgress=!1,new i.pF$(this._snackBar).showMessage(i.GL1.OK,n.message)},complete:()=>{this.hasTaskInProgress=!1;let n="";this._transServ.get("EVAL_REV_GUARDADA").subscribe(l=>{n=l});let o="";this._transServ.get("OPERACION_EXITOSA").subscribe(l=>{o=l}),new i.pF$(this._snackBar).showMessage(i.GL1.OK,n,i.PWx.snackBar,o),this.router.navigate(["evaluation",this._evaluationUUID,"view"])}})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(f.gz),t.Y36(d.QS),t.Y36(v.sK),t.Y36(tt),t.Y36(F.ux),t.Y36(f.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-survey"]],viewQuery:function(o,a){if(1&o&&t.Gf(Rt,7),2&o){let l;t.iGM(l=t.CRH())&&(a._evaluationData=l.first)}},decls:50,vars:36,consts:[[3,"loading"],[1,"example-card"],[2,"display","flex","flex-wrap","wrap"],[1,"surver-subtitle"],[3,"formGroup","submit"],[2,"margin-top","0.6em",3,"linear","selectionChange"],["stepper",""],[3,"stepControl"],["matStepLabel",""],[3,"_actionText","_journalData","journalDataFormGroup"],["fxLayout","row wrap","fxLayout.xs","row","fxLayoutAlign","end center"],["mat-raised-button","","color","primary","type","button",2,"color","white",3,"matTooltip","disabled","click"],[4,"ngIf"],[3,"_resultAndRecoms"],["fxLayout","row wrap","fxLayout.xs","row","fxLayoutAlign","end center",2,"margin-top","1.5em"],["mat-raised-button","","color","primary","type","button",2,"color","white",3,"matTooltip","click"],["mat-raised-button","","color","primary","type","button",2,"color","white","margin-left","1.5em",3,"matTooltip","click"],[3,"activate"],["mat-raised-button","","color","primary","type","button",2,"color","white","margin-left","1.5em",3,"matTooltip","disabled","click"]],template:function(o,a){if(1&o){const l=t.EpF();t._UZ(0,"toco-progress",0),t.TgZ(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-card-subtitle")(7,"div",2)(8,"div",3),t._uU(9),t.qZA(),t.TgZ(10,"div",3),t._uU(11),t.qZA(),t.TgZ(12,"div",3),t._uU(13),t.qZA(),t.TgZ(14,"div"),t._uU(15),t.qZA()()()(),t.TgZ(16,"mat-card-content")(17,"form",4),t.NdJ("submit",function(){t.CHM(l);const h=t.MAs(19);return t.KtG(a.goToSurvey(h))}),t.TgZ(18,"mat-horizontal-stepper",5,6),t.NdJ("selectionChange",function(h){return a.onSelectedStepHasChanged(h)}),t.TgZ(20,"mat-step",7),t.YNc(21,Ut,2,3,"ng-template",8),t._UZ(22,"app-survey-journal-data",9),t.TgZ(23,"div",10)(24,"button",11),t.NdJ("click",function(){t.CHM(l);const h=t.MAs(19);return t.KtG(a.goToSurvey(h))}),t.ALo(25,"translate"),t._uU(26),t.ALo(27,"translate"),t.TgZ(28,"mat-icon"),t._uU(29,"navigate_next"),t.qZA()()()(),t.TgZ(30,"mat-step",7),t.YNc(31,Et,2,3,"ng-template",8),t.YNc(32,Gt,15,13,"ng-container",12),t.qZA(),t.TgZ(33,"mat-step"),t.YNc(34,Jt,2,3,"ng-template",8),t._UZ(35,"app-survey-result-and-recoms",13),t.TgZ(36,"div",14)(37,"button",15),t.NdJ("click",function(){t.CHM(l);const h=t.MAs(19);return t.KtG(a.goToSurveyBack(h))}),t.ALo(38,"translate"),t._uU(39),t.ALo(40,"translate"),t.TgZ(41,"mat-icon"),t._uU(42,"navigate_before"),t.qZA()(),t.TgZ(43,"button",16),t.NdJ("click",function(){return a.save()}),t.ALo(44,"translate"),t.TgZ(45,"mat-icon"),t._uU(46,"exit_to_app"),t.qZA(),t.TgZ(47,"span"),t._uU(48),t.ALo(49,"translate"),t.qZA()()()()()()()()}2&o&&(t.Q6J("loading",a.hasTaskInProgress),t.xp6(4),t.hij(" ",t.lcZ(5,22,"EVALUACION"),""),t.xp6(5),t.hij("Tipo: ",a.fullEvaluation.entity_type,""),t.xp6(2),t.hij("Metodolog\xeda: ",a.fullEvaluation.methodology_name,""),t.xp6(2),t.hij("Fecha: ",a.fullEvaluation.datetime,""),t.xp6(2),t.hij("Estatus: ",a.fullEvaluation.state,""),t.xp6(2),t.Q6J("formGroup",a.evaluationFormGroup),t.xp6(1),t.Q6J("linear","true"),t.xp6(2),t.Q6J("stepControl",a.evalJournalDataFormGroup),t.xp6(2),t.Q6J("_actionText",a._actionText)("_journalData",a._evaluationData.journalData)("journalDataFormGroup",a.evalJournalDataFormGroup),t.xp6(2),t.Q6J("matTooltip",t.lcZ(25,24,"IR_A_ENCUESTA"))("disabled",a.evalJournalDataFormGroup.invalid),t.xp6(2),t.hij(" ",t.lcZ(27,26,"SIGUIENTE")," "),t.xp6(4),t.Q6J("stepControl",a.evalSurveyFormGroup),t.xp6(2),t.Q6J("ngIf",a._evaluationData.sections),t.xp6(3),t.Q6J("_resultAndRecoms",a._evaluationData.resultAndRecoms),t.xp6(2),t.Q6J("matTooltip",t.lcZ(38,28,"IR_A_ENCUESTA")),t.xp6(2),t.hij(" ",t.lcZ(40,30,"ANTERIOR")," "),t.xp6(4),t.Q6J("matTooltip",t.lcZ(44,32,"GUARDAR_TOOLTIP")),t.xp6(5),t.hij(" ",t.lcZ(49,34,"GUARDAR")," "))},dependencies:[c.O5,Z.lW,A.gM,T.Hw,u.a8,u.dn,u.dk,u.$j,u.n5,y.C0,y.VY,y.Vq,d._Y,d.JL,d.sg,m.xw,m.Wh,i.t15,f.lC,Ot,Lt,v.X$],styles:[".surver-subtitle[_ngcontent-%COMP%]{margin-right:1rem}"]})}return e})(),resolve:{evaluation:yt},children:[{path:i.dw5.edit,component:z},{path:i.dw5.add,component:z},{path:"",redirectTo:"/survey/"+i.dw5.add,pathMatch:"full"}]}];let Nt=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(bt),f.Bz]})}return e})(),Qt=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[c.ez,nt,S.JF,d.UX,et.o9,v.aw,i.IR2,i.TY2,Nt]})}return e})()}}]);